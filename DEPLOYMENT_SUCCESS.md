# âœ… Hardhat èŠ‚ç‚¹å’Œåˆçº¦éƒ¨ç½²æˆåŠŸï¼

## ğŸ‰ å½“å‰çŠ¶æ€

### ğŸ”— Hardhat èŠ‚ç‚¹
- âœ… **è¿è¡Œä¸­**: åœ¨å•ç‹¬çš„ PowerShell çª—å£ä¸­è¿è¡Œ
- ğŸ“¡ **RPC URL**: http://127.0.0.1:8545
- â›“ï¸ **Chain ID**: 31337
- ğŸ“¦ **å½“å‰åŒºå—**: #3

### ğŸ“‹ å·²éƒ¨ç½²çš„åˆçº¦åœ°å€

```json
{
  "entrypoint": "0x5FF137D4b0FDCD49DcA30c7CF57E578a026d2789",
  "factory": "0x5FbDB2315678afecb367f032d93F642f64180aa3",
  "implementation": "0xa16E02E87b7454126E5E10d957A927A7F5B5d2be",
  "paymaster": "0xe7f1725E7734CE288F8367e1Bb143E90bb3F0512",
  "deployer": "0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266"
}
```

è¿™äº›åœ°å€å·²è‡ªåŠ¨ä¿å­˜åˆ°ï¼š
- `backend/.env` - åç«¯ç¯å¢ƒå˜é‡
- `backend/.contract-addresses.json` - JSON æ ¼å¼å¤‡ä»½

### ğŸš€ è¿è¡Œä¸­çš„æœåŠ¡

1. âœ… **Hardhat èŠ‚ç‚¹** - å•ç‹¬çª—å£
   - ç«¯å£: 8545
   - ä¿æŒè¿™ä¸ªçª—å£æ‰“å¼€ï¼
   
2. âœ… **åç«¯ API** - http://localhost:3001
   - å·²è¿æ¥åˆ° Hardhat èŠ‚ç‚¹
   - ä½¿ç”¨çœŸå®çš„åˆçº¦åœ°å€
   
3. âœ… **å‰ç«¯åº”ç”¨** - http://localhost:3000
   - å¯ä»¥è¿æ¥é’±åŒ…å¹¶åˆ›å»ºè´¦æˆ·

## ğŸ¯ ç°åœ¨å¯ä»¥æµ‹è¯•å®Œæ•´åŠŸèƒ½ï¼

### æ­¥éª¤ 1: é…ç½® MetaMask

1. æ‰“å¼€ MetaMask
2. æ·»åŠ è‡ªå®šä¹‰ç½‘ç»œï¼š
   - **ç½‘ç»œåç§°**: Hardhat Local
   - **RPC URL**: http://127.0.0.1:8545
   - **Chain ID**: 31337
   - **è´§å¸ç¬¦å·**: ETH

### æ­¥éª¤ 2: å¯¼å…¥æµ‹è¯•è´¦æˆ·

ä½¿ç”¨ Hardhat çš„æµ‹è¯•è´¦æˆ·ï¼ˆå·²æœ‰ 10000 ETHï¼‰ï¼š

```
åœ°å€: 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266
ç§é’¥: 0xac0974bec39a17e36ba4a6b4d238ff944bacb478cbed5efcae784d7bf4f2ff80
```

âš ï¸ **è­¦å‘Š**: è¿™æ˜¯å…¬å¼€çš„æµ‹è¯•ç§é’¥ï¼Œä»…ç”¨äºæœ¬åœ°å¼€å‘ï¼

### æ­¥éª¤ 3: åˆ›å»ºæ™ºèƒ½è´¦æˆ·

1. è®¿é—® http://localhost:3000
2. è¿æ¥é’±åŒ…ï¼ˆé€‰æ‹© Hardhat Local ç½‘ç»œï¼‰
3. è¾“å…¥ä¸€ä¸ª salt å€¼ï¼ˆä¾‹å¦‚: 3ï¼‰
4. ç‚¹å‡» "Create Account"
5. åç«¯ä¼šè°ƒç”¨å·²éƒ¨ç½²çš„ `SimpleAccountFactory` åˆçº¦
6. è¿”å›æ–°åˆ›å»ºçš„æ™ºèƒ½è´¦æˆ·åœ°å€

### æ­¥éª¤ 4: æµ‹è¯•äº¤æ˜“

- ä½¿ç”¨åˆ›å»ºçš„æ™ºèƒ½è´¦æˆ·å‘é€äº¤æ˜“
- å¯ä»¥å°è¯•ä½¿ç”¨ Paymaster èµåŠ© Gas

## ğŸ”„ å¦‚æœéœ€è¦é‡å¯

### é‡å¯ Hardhat èŠ‚ç‚¹

å¦‚æœå…³é—­äº† Hardhat èŠ‚ç‚¹çª—å£ï¼š

```powershell
# æ‰“å¼€æ–°çš„ PowerShell çª—å£
cd C:\Users\HHaou\cc\acount002\contracts
npx hardhat node
```

**æ³¨æ„**: é‡å¯èŠ‚ç‚¹åéœ€è¦é‡æ–°éƒ¨ç½²åˆçº¦ï¼

```powershell
# åœ¨å¦ä¸€ä¸ªç»ˆç«¯
cd C:\Users\HHaou\cc\acount002\contracts
npx hardhat run scripts/deploy-node.js --network localhost
```

### é‡å¯åç«¯

å¦‚æœåç«¯åœæ­¢ï¼š

```powershell
cd C:\Users\HHaou\cc\acount002\backend
npm start
```

### é‡å¯å‰ç«¯

å¦‚æœå‰ç«¯åœæ­¢ï¼š

```powershell
cd C:\Users\HHaou\cc\acount002\frontend
npm run dev
```

## ğŸ› æ•…éšœæ’é™¤

### é—®é¢˜: å‰ç«¯æ˜¾ç¤º "fetch failed" é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**: 
- ç¡®è®¤ Hardhat èŠ‚ç‚¹çª—å£ä»åœ¨è¿è¡Œ
- æ£€æŸ¥ç«¯å£ 8545 æ˜¯å¦è¢«å ç”¨: `netstat -ano | Select-String ":8545"`
- é‡å¯ Hardhat èŠ‚ç‚¹å¹¶é‡æ–°éƒ¨ç½²åˆçº¦

### é—®é¢˜: åˆçº¦è°ƒç”¨å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**:
- Hardhat èŠ‚ç‚¹é‡å¯åï¼ŒåŒºå—é“¾çŠ¶æ€ä¼šé‡ç½®
- éœ€è¦é‡æ–°éƒ¨ç½²åˆçº¦
- æ›´æ–° `backend/.env` ä¸­çš„æ–°åœ°å€ï¼ˆæˆ–è¿è¡Œ deploy-node.js è‡ªåŠ¨æ›´æ–°ï¼‰

### é—®é¢˜: MetaMask æ˜¾ç¤ºé”™è¯¯çš„ nonce

**è§£å†³æ–¹æ¡ˆ**:
- MetaMask â†’ è®¾ç½® â†’ é«˜çº§ â†’ æ¸…é™¤æ´»åŠ¨æ•°æ®
- è¿™ä¼šé‡ç½® nonce è®¡æ•°å™¨

## ğŸ“ åˆçº¦åŠŸèƒ½è¯´æ˜

### SimpleAccountFactory
- ä½¿ç”¨ CREATE2 åˆ›å»ºç¡®å®šæ€§åœ°å€
- æ¯ä¸ª (owner, salt) ç»„åˆç”Ÿæˆå”¯ä¸€åœ°å€
- åœ°å€åœ¨éƒ¨ç½²å‰å°±å¯ä»¥è®¡ç®—å‡ºæ¥

### SimpleAccount
- ERC-4337 å…¼å®¹çš„æ™ºèƒ½åˆçº¦é’±åŒ…
- æ”¯æŒ owner ç­¾åéªŒè¯
- å¯ä»¥æ‰§è¡Œå•ä¸ªæˆ–æ‰¹é‡äº¤æ˜“
- æ”¯æŒå‡çº§ï¼ˆUUPS æ¨¡å¼ï¼‰

### SimplePaymaster
- ç®€åŒ–çš„ Paymaster å®ç°
- å¯ä»¥ä¸ºç”¨æˆ·èµåŠ© Gas è´¹ç”¨
- ä½¿ç”¨ç­¾åéªŒè¯èµåŠ©è¯·æ±‚
- Owner å¯ä»¥å­˜å…¥ ETH ç”¨äºæ”¯ä»˜ Gas

## ğŸˆ ä¸‹ä¸€æ­¥

- âœ… æµ‹è¯•è´¦æˆ·åˆ›å»º
- âœ… æµ‹è¯•äº¤æ˜“å‘é€
- âœ… æµ‹è¯• Paymaster Gas èµåŠ©
- ğŸš€ å‡†å¤‡éƒ¨ç½²åˆ° Sepolia æµ‹è¯•ç½‘
- ğŸ“š å­¦ä¹  ERC-4337 çš„é«˜çº§åŠŸèƒ½

## ğŸ“š ç›¸å…³æ–‡æ¡£

- `README.md` - é¡¹ç›®æ¦‚è¿°
- `QUICKSTART.md` - å¿«é€Ÿå¼€å§‹
- `LOCAL_DEPLOYMENT.md` - æœ¬åœ°éƒ¨ç½²è¯¦ç»†è¯´æ˜
- `docs/PROJECT_OVERVIEW.md` - æ¶æ„è¯´æ˜

---

**ğŸŠ æ­å–œï¼æ‚¨çš„ Account Abstraction é¡¹ç›®å·²ç»å®Œå…¨é…ç½®å¥½äº†ï¼**

ç°åœ¨å¯ä»¥å¼€å§‹æµ‹è¯•å®Œæ•´çš„è´¦æˆ·æŠ½è±¡åŠŸèƒ½äº†ï¼
